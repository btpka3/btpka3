* link:https://checkstyle.sourceforge.io/[checkstyle]
* link:https://maven.apache.org/plugins/maven-checkstyle-plugin/[maven-checkstyle-plugin]
** link:https://maven.apache.org/plugins/maven-checkstyle-plugin/examples/multi-module-config.html[Multimodule Configuration]。
    将checkstyle 相关配置配置导独立的maven module中，再由其他moudle依赖。


== Q: checkstyle vs. pmd vs. findbugs ?


== demo
=== pom.xml

[source,xml]
----
<project>
    <properties>
        <checkstyle.config.location>${maven.multiModuleProjectDirectory}/checkstyle/checkstyle.xml</checkstyle.config.location>
        <checkstyle.consoleOutput>true</checkstyle.consoleOutput>
        <checkstyle.failOnViolation>false</checkstyle.failOnViolation>
        <checkstyle.console>true</checkstyle.console>
        <checkstyle.properties.location>${maven.multiModuleProjectDirectory}/checkstyle/checkstyle.properties</checkstyle.properties.location>
    </properties>

    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-checkstyle-plugin</artifactId>
                <executions>
                    <execution>
                        <id>validate</id>
                        <phase>validate</phase>
                        <goals>
                            <goal>check</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        <plugins>
        <pluginManagement>
            <plugins>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-checkstyle-plugin</artifactId>
                    <version>3.6.0</version>
                    <configuration>
                            <propertyExpansion>
                                rootDir=${maven.multiModuleProjectDirectory}/checkstyle
                            </propertyExpansion>
                        </configuration>
                </plugin>
            </plugins>
        </pluginManagement>
    </build>
</project>
----


=== checkstyle/checkstyle.xml

[source,xml]
----
<?xml version="1.0"?>
<!DOCTYPE module PUBLIC
    "-//Checkstyle//DTD Checkstyle Configuration 1.3//EN"
    "https://checkstyle.org/dtds/configuration_1_3.dtd">

<!--

参考：
http://checkstyle.sourceforge.net/config.html

示例：
https://github.com/checkstyle/checkstyle/blob/master/src/main/resources/google_checks.xml
-->
<module name="Checker">
    <module name="TreeWalker">
        <module name="IllegalImport"/>
        <module name="ImportControl">
            <property name="file" value="${rootDir}/import-control.xml"/>
            <property name="path" value="^.*[\\/]src[\\/](main|test)[\\/]java[\\/].*$"/>
        </module>
    </module>
</module>
----

=== checkstyle/import-control.xml

[source,xml]
----
<?xml version="1.0"?>
<!DOCTYPE import-control PUBLIC
    "-//Checkstyle//DTD ImportControl Configuration 1.4//EN"
    "https://checkstyle.org/dtds/import_control_1_4.dtd">

<!--
参考:
https://checkstyle.sourceforge.io/config_imports.html#ImportControl
-->

<import-control pkg="me.test" strategyOnMismatch="allowed">

    <disallow pkg="sun"/>

    <!-- 不要使用 commons-lang, 请使用 commons-lang3 -->
    <disallow pkg="org.apache.commons.lang"/>

    <!-- 不要使用 JUnit 4.x, 请使用 JUnit 5.x -->
    <allow pkg="org.junit.jupiter"/>
    <disallow pkg="org.junit"/>

</import-control>

----


== Unable to find: xxx

* link:https://github.com/checkstyle/checkstyle/blob/master/src/main/java/com/puppycrawl/tools/checkstyle/utils/CommonUtil.java#L421[CommonUtil]
