<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.24">
<title>xxx</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child{border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock pre>code{display:block}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active,#footnotes .footnote a:first-of-type:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article">
<div id="header">
</div>
<div id="content">
<div class="ulist">
<ul>
<li>
<p><a href="https://www.gnu.org/s/gawk/manual/gawk.html">The GNU Awk User’s Guide</a></p>
</li>
<li>
<p><a href="https://stackoverflow.com/questions/43250592/awk-to-read-file-as-a-whole">Awk to read file as a whole</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>awk 有不同的实现，如果下面示例不可用，请尝试使用 gawk （GNU版本的）</p>
</div>
<div class="sect1">
<h2 id="_xxx">xxx</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell"># 多个分隔符， -F 使用的 正则表达是
echo "aaa|bbb,ccc" | awk -F"[\|,]" '{print   $1 "___" $2 "___" $3 }'
echo "aaa|bbb,ccc" | gawk -F"[|,]" '{printf("%s___%s___%s", $1, $2, $3)}'

echo "aaallbbbllccc" | gawk -F"ll" '{printf("%s___%s___%s", $1, $2, $3)}'
echo "aaal[bbbl[ccc" | gawk -F'l\\[' '{printf("%s___%s___%s", $1, $2, $3)}'

# MacOS 上这样安装
brew install gawk

# 字符串拼接
echo aaa | awk -v x=xxx '{ v="11" $0 "22" x "33"; print v }'

ll | awk '{print $5}'

awk -F"|" '{print $5}'

# 添加前缀

cat &lt;&lt; EOF | awk -v prefix=xxx. '$0=prefix $0'
aaa
bbb
ccc
EOF

# 输出最后一个field
awk -F" " '{print $NF}'

# 输出每个字段
## $1=$1 # Re-arranging first field to make OFS into picture, since by default OFS is space and I am setting it as a new line.
##       # 当将 $1 重新赋值给 $1 后，awk 会 将所有字段重新使用 OFS 连接起来, 而无参的 print 会输出新的 $0
##       # https://www.gnu.org/software/gawk/manual/html_node/Changing-Fields.html
cat &lt;&lt;EOF |
aaa,bbb,ccc
xxx,yyy,zzz
111,222,333
EOF
awk '
BEGIN{FS=",";OFS="\n"}
{$1=$1;print;}
'

# 替换分隔符
cat &lt;&lt;EOF |
aaa|bbb|ccc
xxx|yyy|zzz
111|222|333
EOF
awk '
BEGIN{FS="|";OFS="\t"}
{$1=$1;print;}
' | xargs -I {} echo "=== {}"

# 字符串替换
# 删除999
cat &lt;&lt;EOF |
999aaa999|bbb|ccc
999xxx999|yyy|zzz
999111999|222|333
EOF
gawk '
BEGIN{FS="|";OFS="|"}
{$1=gensub(/999/,"","g",$1);print;}
' | xargs -I {} echo "=== {}"



# 输出每个字段
IN="aaa;bbb;ccc"
for i in $(echo $IN | tr ";" "\n")
do
  echo $i
done


# 替换换行符 "\r\n" -&gt; "\n"
awk 'BEGIN{RS="\r\n"; ORS="\n"}{print $0}' file &gt; file

# 行内求和
echo 1 1 2 300 | awk '{sum=0;i=1; while(i&lt;5){ sum+=$i; i++} avg=sum/4; print "avg/sum = ",avg,sum}'

# 多行求和
ll | awk '{s+=$5} END{print s}'

# 条件过滤
ll | awk '{ if($5&gt;10000) print $0}'

echo "aaa bbb" | gawk '{
  if(match($0, /(.*) (.*)/, arr)){
     print arr[1] "=" arr[2]
  }
}'

# 正则提取分组
echo '"Common Cleaner" Id=21 BLOCKED on AAA@111 owned by "AAA Handler" Id=11' |
gawk '
{
    if(match($0, /^"[^"]*" [^ ]+ \w+ on ([^ ]+) owned by "[^"]*" Id=([^ ]+)$/, arr)){
        print arr[2] " " arr[1]
    }
}
'

# 作为引号中的命令
echo 'ls -l | awk -F"|" '"'"'{ if($5&gt;10000) print $0}'"'"

# group，count
cat &lt;&lt; EOF | awk -F, '{array[$1]++} END{for(k in array){print k,array[k] | "sort -k1"}}'
Item1,200
Item1,200
Item3,900
Item2,500
Item2,800
Item1,600
Item4,
Item5,
Item4,100
Item5,
Item5,444
EOF


# group，distinct concat
cat &lt;&lt; EOF |
X1,AAA,101
X2,AAA,102
X2,AAA,102
X3,CCC,301
X4,BBB,201
X5,BBB,202
X6,AAA,103
EOF
awk -F, '{print $2, $3}' | sort | uniq |
awk '
{
    if(array[$1] == "") {
        array[$1] = $2 ;
    } else {
        array[$1] = array[$1] "," $2
    }
}
END {
    for( k in array ){
     print k " " array[k]
    }
}
' | sort



# group，sum
cat &lt;&lt; EOF |
time01,AAA,1
time01,AAA,2
time01,BBB,3
time02,AAA,100
time02,BBB,200
time02,BBB,300
EOF
gawk -F, '
BEGIN{FS=",";OFS="|"}
{array[$1][$2] += $3}
END {
    for(time in array ) {
        for( type in array[time] ) {
            print time OFS type OFS array[time][type]
        }
    }
}
'</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_float_int">float &#8594; int</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">printf "%4.3e\n", 1950
printf "%.0f\n", 3.1415926
printf "%.3f\n", 3.1415926

grep 'cpu ' /proc/stat | awk '{usage=($2+$4)*100/($2+$4+$5)} END {printf "%.1f" , usage}'</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_行内统计">行内统计</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell"># 统计行内 数值字符串 是个数，并输出

cat &lt;&lt;EOF |
aa 11 bb
bb
33 ee ff 88
cc 99 00 66 dd
EOF
awk '
{
    delete numArr;
    numArrStr = "" ;
    numberCount=0
    s=$0
    while (match(s, /([[:digit:]]+)/, sArr)) {
        numberCount++ ;
        numArr[numberCount]=sArr[1];

        s=substr(s, sArr[1, "start"]+sArr[1, "length"]);
    }
    for(i in numArr){
        if( i==1){
            numArrStr = numArr[i];
        } else {
            numArrStr = numArrStr "," numArr[i]
        }
    }
    printf "%-30s : %2d : %s \n", $0 , numberCount, numArrStr;
}
'</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_提取字符串">提取字符串</h3>
<div class="paragraph">
<p><a href="https://www.gnu.org/software/gawk/manual/html_node/Bracket-Expressions.html#Bracket-Expressions">Using Bracket Expressions</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">cat &lt;&lt;EOF |
中华1A18912XDFUDTTSLVP48EC人民
  1A18927UAEB74UQOOW0AUD
22 1A18912XDFUDTTSLVP48EC 1A18912YD4KDTTN4NEHKZ
O ddd
EOF
awk --re-interval '
{
    s=$0
    while(match(s, /([A-Z0-9]{22})/, sArr)) {
        printf "%s\n", sArr[1];
        s=substr(s, sArr[1, "start"]+sArr[1, "length"]);
    }
}
'</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_截取">截取</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">cat &lt;&lt;EOF |
2020-03-20 14:48:41,166 [http-bio-7001-exec-15] WARN  c.a.s.t.a.c.a.UserDetailServiceImpl - user not found : 111
2020-03-20 14:50:14,165 [http-bio-7001-exec-19] WARN  c.a.s.t.a.c.a.UserDetailServiceImpl - user not found : 222
2020-03-20 14:51:48,487 [http-bio-7001-exec-4] WARN  c.a.s.t.a.c.a.UserDetailServiceImpl - user not found : 222
2020-03-20 14:53:22,138 [http-bio-7001-exec-61] WARN  c.a.s.t.a.c.a.UserDetailServiceImpl - user not found : 333
EOF
awk 'match($0, /.*user not found : (.*)/, arr) {print arr[1]}' | sort | uniq</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_替换">替换</h3>
<div class="paragraph">
<p>替换前N行中满足条件的数据</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">cat &lt;&lt;EOF |
   &lt;groupId&gt;aa.bb.cc&lt;/groupId&gt;
   &lt;version&gt;1.1.1&lt;/version&gt;
   &lt;properties&gt;
      &lt;slf4j.version&gt;1.7.2&lt;slf4j.version&gt;
      &lt;version&gt;2.2.2&lt;/version&gt;
   &lt;/properties&gt;
EOF
awk -v newVersion=3.3.3  '
{
    if(FNR&lt;4){
      gsub("&lt;version&gt;.*&lt;/version&gt;", ("&lt;version&gt;" newVersion "&lt;/version&gt;"))
    }
    print
}
'</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_trim">trim</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">echo  "Main-Class: org.springframework.boot   .loader.JarLauncher " | awk -F':' '{gsub(/[ \t\n]+/, "", $2); print "==" $2 "=="}'</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_多行分割">多行分割</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">cat &lt;&lt;EOF |
class-info        com.taobao.eagleeye.EagleEye
code-source       /tmp/bbb.jar
classLoaderHash   69454fd4

class-info        com.taobao.eagleeye.EagleEye
code-source       /taobao-hsf.sar/aaa.jar
classLoaderHash   1b5b6fcb

class-info        com.taobao.eagleeye.EagleEye
code-source       /tmp/ccc.jar
classLoaderHash   68f952fe
EOF
gawk  ' BEGIN{RS="class-info"; ORS=""} {  if(length($0) !=0){ print "========\n" RS $0}}'</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_替换_多行">替换-多行</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">cat &lt;&lt;EOF |
&lt;project&gt;
  &lt;parent&gt;
    &lt;groupId&gt;aa.bb.cc&lt;/groupId&gt;
&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
    &lt;version&gt;0.7.87-changletest-SNAPSHOT&lt;/version&gt;
=======
    &lt;version&gt;0.7.81-SNAPSHOT&lt;/version&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 34b96fa2474550722791e84d3749dbf6f50504db
    &lt;relativePath&gt;../pom.xml&lt;/relativePath&gt;
  &lt;/parent&gt;
  &lt;artifactId&gt;xxx-api&lt;/artifactId&gt;
  &lt;properties&gt;
    &lt;slf4j.version&gt;1.7.2&lt;slf4j.version&gt;
    &lt;version&gt;2.2.2&lt;/version&gt;
  &lt;/properties&gt;
&lt;/project&gt;
EOF
gawk -v newVersion=3.3.3  '
{
    print gensub("&lt;&lt;&lt;&lt;&lt;&lt;&lt; .{1,40}\n(\\s*)&lt;version&gt;[^&lt;&gt;]*&lt;/version&gt;\n=======\n\\s*&lt;version&gt;[^&lt;&gt;]*&lt;/version&gt;\n&gt;&gt;&gt;&gt;&gt;&gt;&gt; .{1,40}\n", "\\1&lt;version&gt;" newVersion "&lt;/version&gt;\n", "g")

}
' RS='^$'</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_查找过滤_多行">查找过滤-多行</h3>
<div class="paragraph">
<p><a href="https://www.gnu.org/software/gawk/manual/html_node/gawk-split-records.html">Record Splitting with gawk</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell"># 过滤出相关内容
# 注意RS中使用 '^', '$' 时，总是匹配整个文件内容的开始和结尾。
# 由于 awk 中不支持 non-capturing group, 故输出时，需要手动将处理

cat &lt;&lt;EOF |
"aaa" "a111"
   a1
   a2
   a3
"bbb" "b111"
   b1
   b2
   b3
"ccc" "c111"
   c1
   c2
   c3
EOF
gawk  '
BEGIN{RS="\n\""; ORS=""}
{
 if (match($0, "bbb|ccc")){
   print  "========\n" (FNR == 1 ? "" : "\"") $0 "\n" }
 }
'</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_行统计_多行">行统计-多行</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell"># 过滤出相关内容,并按照行数去统计排序，找出TOP-n
cat &lt;&lt;EOF |
"aaa" "a111"
   line-101
   line-201
   line-301
"bbb" "b111"
   line-301
   line-401
"ccc" "c111"
   line-301
   line-201
   line-501
EOF
gawk  '
BEGIN{RS="\n\""; ORS="";FS="\n"}
{
  if (match($0, "bbb|ccc")){
    print (FNR == 1 ? "" : "\"") $0 "\n"
  }
}
' | grep . | grep -E -v "^\"" | sort | uniq -c | sort -k1 -n -r</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell"># 过滤出相关内容,并按照行数去统计排序，找出TOP-n
cat &lt;&lt;EOF |
ts="111" "1111"
   aaa
   aaa
   aaa
ts="222" "2222"
   bbb
   bbb
   bbb
ts="333" "3333"
   bbb
   bbb
   bbb
ts="444" "4444"
   aaa
   aaa
   aaa
ts="555" "5555"
   ccc
   ccc
ts="666" "666"
   aaa
   aaa
   aaa


EOF
gawk '
BEGIN{RS="\nts=";ORS="";}
{
  # 移除首行，只保留堆栈
  stack = $0;
  n = index(stack, "\n")
  if(n &gt; 0){
    stack=substr(stack, n+1 )
  }
  # 移除行尾空白
  stack=gensub(/\s+$/, "", "g", stack)
  arr[stack] ++
}
END {
  PROCINFO["sorted_in"] = "@val_num_desc";
  for (stack in arr){
    print  "====== : " arr[stack] "\n" stack "\n"
  }
}
'




grep -v -F "Command execution times exceed limit" /tmp/a.txt | \
grep -v -F "Affect(class count:" | \
awk '
BEGIN{RS="\nts=";ORS="";}
{
  # 移除首行，只保留堆栈
  stack = $0;
  n = index(stack, "\n")
  if(n &gt; 0){
    stack=substr(stack, n+1 )
  }
  # 移除行尾空白
  stack=gensub(/\s+$/, "", "g", stack)
  arr[stack] ++
}
END {
  PROCINFO["sorted_in"] = "@val_num_desc";
  for (stack in arr){
    print  "====== : " arr[stack] "\n" stack "\n"
  }
}
'

/tmp/a.txt | head -n 50 |
print  "====== : [" n "] :\n" stack "\n"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">CONTENT='
"AAA Handler" Id=11 RUNNABLE
        at java.base@11.0.15.14-JDK/java.lang.ref.Reference.waitForReferencePendingList(Native Method)
        at java.base@11.0.15.14-JDK/java.lang.ref.Reference.processPendingReferences(Reference.java:241)

        Number of locked synchronizers = 1
        - java.util.concurrent.ThreadPoolExecutor$Worker@534c8c29

"Common-Cleaner" Id=21 BLOCKED on AAA@111 owned by "AAA Handler" Id=11
        at java.base@11.0.15.14-JDK/java.lang.Object.wait(Native Method)
        -  waiting on AAA@111
        at java.base@11.0.15.14-JDK/java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:155)

"AAA Handler" Id=12 RUNNABLE
        at java.base@11.0.15.14-JDK/java.lang.ref.Reference.waitForReferencePendingList(Native Method)
        at java.base@11.0.15.14-JDK/java.lang.ref.Reference.processPendingReferences(Reference.java:241)

        Number of locked synchronizers = 1
        - java.util.concurrent.ThreadPoolExecutor$Worker@534c8c29

"AAA Handler" Id=13 RUNNABLE
        at java.base@11.0.15.14-JDK/java.lang.ref.Reference.waitForReferencePendingList(Native Method)
        at java.base@11.0.15.14-JDK/java.lang.ref.Reference.processPendingReferences(Reference.java:241)

        Number of locked synchronizers = 1
        - java.util.concurrent.ThreadPoolExecutor$Worker@534c8c29

"Common-Cleaner" Id=22 BLOCKED on AAA@222 owned by "AAA Handler" Id=11
        at java.base@11.0.15.14-JDK/java.lang.Object.wait(Native Method)
        -  waiting on AAA@222
        at java.base@11.0.15.14-JDK/java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:155)

"Common-Cleaner" Id=23 BLOCKED on BBB@111 owned by "AAA Handler" Id=14
        at java.base@11.0.15.14-JDK/java.lang.Object.wait(Native Method)
        -  waiting on BBB@111
        at java.base@11.0.15.14-JDK/java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:155)

"Common-Cleaner" Id=24 BLOCKED on BBB@111 owned by "AAA Handler" Id=14
        at java.base@11.0.15.14-JDK/java.lang.Object.wait(Native Method)
        -  waiting on BBB@111
        at java.base@11.0.15.14-JDK/java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:155)

"AAA Handler" Id=14 RUNNABLE
        at java.base@11.0.15.14-JDK/java.lang.ref.Reference.waitForReferencePendingList(Native Method)
        at java.base@11.0.15.14-JDK/java.lang.ref.Reference.processPendingReferences(Reference.java:241)

        Number of locked synchronizers = 1
        - java.util.concurrent.ThreadPoolExecutor$Worker@534c8c29
'
STACK_FILE=/tmp/stack.log.2023-02-03_23:30:40
echo $CONTENT &gt; $STACK_FILE

cat $STACK_FILE | grep BLOCKED | gawk '
{
    if(match($0, /^"[^"]*" [^ ]+ \w+ on ([^ ]+) owned by "[^"]*" Id=([^ ]+)$/, arr)){
        lock     = arr[1]
        threadId = arr[2]
        print threadId " " lock
    }
}
' | sort | uniq |
gawk '
{
    if(match($0, /(.*) (.*)/, arr)){
        threadId=arr[1]
        lock=arr[2]
        if(array[threadId] == "") {
            array[threadId] = lock ;
        } else {
            array[threadId] = array[threadId] "," lock
        }
    }
}
END {
    for( threadId in array ){
       print threadId " " array[threadId]
    }
}
' |
xargs -I '{}' gawk -v id_lock={} -v hostname=`hostname` -v STACK_FILE=$STACK_FILE '
BEGIN {
    if(match(id_lock, /(.*) (.*)/, arr)){
        threadId=arr[1]
        lock=arr[2]
    }
}
{
   s=$0
   regex = "(\"[^\"]*\" Id=" threadId " RUNNABLE)\n([^\"]*(\n\n|$))"
   while(match(s, regex, arr)){
      print "==================== " hostname ":" STACK_FILE;
      print arr[1] " lock " lock;
      print arr[2];
      s = substr(s, arr[1, "start"] + arr[1, "length"]);
   }
}
' RS='^$' $STACK_FILE</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">for STACK_FILE in /home/admin/logs/hsf/HSF_JStack.log.2023-02-09_10:38:31
do
    grep BLOCKED $STACK_FILE | awk '
{
    if(match($0, /^"[^"]*" [^ ]+ \w+ on ([^ ]+) owned by "[^"]*" Id=([^ ]+)$/, arr)){
        lock     = arr[1]
        threadId = arr[2]
        print threadId " " lock
    }
}
' | sort | uniq |
awk '
{
    if(match($0, /(.*) (.*)/, arr)){
        threadId=arr[1]
        lock=arr[2]
        if(array[threadId] == "") {
            array[threadId] = lock ;
        } else {
            array[threadId] = array[threadId] "," lock
        }
    }
}
END {
    for( threadId in array ){
       print threadId " " array[threadId]
    }
}
' |
xargs -I '{}' gawk -v id_lock={} -v hostname=`hostname` -v STACK_FILE="${STACK_FILE}" '
BEGIN {
    if(match(id_lock, /(.*) (.*)/, arr)){
        threadId=arr[1]
        lock=arr[2]
    }
}
{
   s=$0
   regex = "(\"[^\"]*\" Id=" threadId " RUNNABLE)\n([^\"]*(\n\n|$))"
   while(match(s, regex, arr)){
      print "==================== " hostname ":" STACK_FILE;
      print arr[1] " lock " lock;
      print arr[2];
      s = substr(s, arr[1, "start"] + arr[1, "length"]);
   }
}
' RS='^$' $STACK_FILE
done</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">LOG_FILE=HSF_JStack_stat_`date +%Y%m%d%H%M%S`.log

pgm -b -p 20 `armory -leg mtee3.content_sync.prodhost` '
for STACK_FILE in /home/admin/logs/hsf/HSF_JStack.log*
do
    grep BLOCKED $STACK_FILE | awk '"'"'
{
    if(match($0, /^"[^"]*" [^ ]+ \w+ on ([^ ]+) owned by "[^"]*" Id=([^ ]+)$/, arr)){
        lock     = arr[1]
        threadId = arr[2]
        print threadId " " lock
    }
}
'"'"' | sort | uniq |
awk '"'"'
{
    if(match($0, /(.*) (.*)/, arr)){
        threadId=arr[1]
        lock=arr[2]
        if(array[threadId] == "") {
            array[threadId] = lock ;
        } else {
            array[threadId] = array[threadId] "," lock
        }
    }
}
END {
    for( threadId in array ){
       print threadId " " array[threadId]
    }
}
'"'"' |
xargs -I {} gawk -v id_lock={} -v hostname=`hostname` -v STACK_FILE="${STACK_FILE}" '"'"'
BEGIN {
    if(match(id_lock, /(.*) (.*)/, arr)){
        threadId=arr[1]
        lock=arr[2]
    }
}
{
   s=$0
   regex = "(\"[^\"]*\" Id=" threadId " RUNNABLE)\n([^\"]*(\n\n|$))"
   while(match(s, regex, arr)){
      print "==================== " hostname ":" STACK_FILE;
      print arr[1] " lock " lock;
      print arr[2];
      s = substr(s, arr[1, "start"] + arr[1, "length"]);
   }
}
'"'"' RS='"'"'^$'"'"' $STACK_FILE
done
' &gt; $LOG_FILE

zip -r ${LOG_FILE}.zip $LOG_FILE</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_regex">regex</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_转义字符">转义字符</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-plain" data-lang="plain">\\          # 匹配单个字符 `\`
\a          # The “alert” character, Ctrl-g, ASCII code 7 (BEL)
\b          # Backspace, Ctrl-h, ASCII code 8 (BS).
\f          # Formfeed, Ctrl-l, ASCII code 12 (FF).
\n          # Newline, Ctrl-j, ASCII code 10 (LF).
\r          # Carriage return, Ctrl-m, ASCII code 13 (CR).
\t          # Horizontal TAB, Ctrl-i, ASCII code 9 (HT).
\v          # Vertical TAB, Ctrl-k, ASCII code 11 (VT).
\nnn        # The octal value nnn, where nnn stands for 1 to 3 digits between ‘0’ and ‘7’.
            # For example, the code for the ASCII ESC (escape) character is ‘\033’.
\xhh…       # `hh` 表示十六进制的字符 [0-9a-fA-F], `\x` 之后最多允许2个字符
\uhh…       # `hh` 表示十六进制的字符 [0-9a-fA-F], `\x` 之后最多允许8个字符
\/          # 匹配单个字符 `/`
\"          # 匹配单个字符 `"`</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_正则表达式操作符">正则表达式操作符</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-plain" data-lang="plain">\           # 用来转义特殊字符串，比如  `\$` 匹配单个字符串 `$`, 而不是表示匹配行尾
^           # 匹配行首
$           # 匹配行尾
.           # 匹配任意单个字符
[…]         # 匹配反括号内的任意单个字符。
[^…]        # 不匹配方括号内的任意字符
|           # 或
(…)         # 分组
*           # 出现0次或任意多次
+           # 出现至少1次
?           # 出现至少0次，或1次
{n}         # 出现至少n次
{n,}        # 出现至少n次
{n,m}       # 出现至少n次，最多m次</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_特殊的方括号表达式">特殊的方括号表达式</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-plain" data-lang="plain">[:alnum:]	Alphanumeric characters
[:alpha:]	Alphabetic characters
[:blank:]	Space and TAB characters
[:cntrl:]	Control characters
[:digit:]	Numeric characters
[:graph:]	Characters that are both printable and visible (a space is printable but not visible, whereas an ‘a’ is both)
[:lower:]	Lowercase alphabetic characters
[:print:]	Printable characters (characters that are not control characters)
[:punct:]	Punctuation characters (characters that are not letters, digits, control characters, or space characters)
[:space:]	Space characters (these are: space, TAB, newline, carriage return, formfeed and vertical tab)
[:upper:]	Uppercase alphabetic characters
[:xdigit:]	Characters that are hexadecimal digits</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_gawk_专有转义操作符">gawk 专有转义操作符</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-plain" data-lang="plain">\s          # 匹配空白，等价于 `[[:space:]]`
\S          # 不匹配空白，等价于 `[^[:space:]]`
\w          # 等价于  `[[:alnum:]_]`
\W          # 等价于  `[^[:alnum:]_]`
\&lt;          # 匹配一个词开头前的空字符串，比如 `/\&lt;away/` 匹配 "away", 但不匹配 "stowaway"
\&gt;          # 匹配一个词结尾后的空字符串，比如 `/stow\&gt;/` 匹配 "stow", 但不匹配 "stowaway"
\y          # 匹配一个词开头前、或结尾后的空字符串，用来表示一个词的边界
\B          # 匹配词内匹配（不含开头与结尾）。比如 `/\Brat\B/` 匹配 "crate", 但不匹配 "dirty rat"</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_常用正则示例">常用正则示例</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell"># 提取更则分组, 但只支持贪婪限定符（Greedy quantifiers），不支持 Reluctant quantifiers
echo aaa111ccc222ccc | gawk '{if(match($0, /aaa(.*)ccc/, arr)){ print arr[1] }}'</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_删除第一行">删除第一行</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell"># 命令拆解
cat &lt;&lt;EOF |
aaa
bbb
ccc
EOF
tee a.txt

awk 'NR&gt;1' a.txt

# 上述命令合并
cat &lt;&lt;EOF |
aaa
bbb
ccc
EOF
awk 'NR&gt;1'</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2025-10-17 03:56:17 UTC
</div>
</div>
</body>
</html>