<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.24">
<title>参考</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child{border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock pre>code{display:block}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active,#footnotes .footnote a:first-of-type:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article">
<div id="header">
</div>
<div id="content">
<div class="sect1">
<h2 id="_参考">参考</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://cn.dubbo.apache.org/zh-cn/index.html">apache dubbo</a></p>
</li>
<li>
<p>org.apache.dubbo.config.spring.context.annotation.DubboConfigConfiguration</p>
</li>
<li>
<p>org.apache.dubbo.config.spring.ConfigCenterBean</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_error">error</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_字符串substring下标越界">字符串substring下标越界</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-plain" data-lang="plain">堆栈
"localhost-startStop-1@2386" daemon prio=5 tid=0x1c nid=NA runnable
  java.lang.Thread.State: RUNNABLE
	  at org.apache.dubbo.common.BaseServiceMetadata.interfaceFromServiceKey(BaseServiceMetadata.java:73)
	  at org.apache.dubbo.rpc.model.FrameworkServiceRepository.keyWithoutGroup(FrameworkServiceRepository.java:97)
	  at org.apache.dubbo.rpc.model.FrameworkServiceRepository.registerProvider(FrameworkServiceRepository.java:58)
	  at org.apache.dubbo.rpc.model.ModuleServiceRepository.registerProvider(ModuleServiceRepository.java:110)


参数：
serviceKey = nacos://nacos.default.svc.cluster.local:8848/org.apache.dubbo.metadata.MetadataService:1.0.0
groupIndex=7
versionIndex=5
serviceKey.substring(groupIndex, versionIndex) # 报错 java.lang.StringIndexOutOfBoundsException
原因：误设置： nacos 的地址 =&gt;  org.apache.dubbo.config.ApplicationConfig#setName</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_指定provider的_ip_和端口">指定provider的 IP 和端口</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://cn.dubbo.apache.org/en/docs/v2.7/user/examples/invoke-with-specified-ip/">Invoke provider with specified IP port</a></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">try {
    // create Address instance based on provider's ip port
    Address address = new Address("10.220.47.253", 20880);
    RpcContext.getContext().setObjectAttachment("address", address);
    return testService.sayHello("Tom");
} catch (Throwable ex){
    return ex.getMessage();
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_dubbo_admin">dubbo-admin</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://hub.docker.com/r/apache/dubbo-admin">docker.io/apache/dubbo-admin:0.5.0</a>
*《<a href="https://github.com/apache/dubbo-admin/wiki/Dubbo-Admin%E9%85%8D%E7%BD%AE%E8%AF%B4%E6%98%8E">Dubbo Admin配置说明</a>》</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">echo '
server.port=38080
#dubbo.protocol.port=30880
#dubbo.application.qos-port=32222

admin.config-center=nacos://nacos:nacos@11.167.75.235:8848?group=DEFAULT_GROUP&amp;namespace=public
admin.registry.address=nacos://nacos:nacos@11.167.75.235:8848?group=dubbo
admin.metadata-report.address=nacos://nacos:nacos@11.167.75.235:8848?group=dubbo
admin.root.user.name=root
admin.root.user.password=root
admin.check.sessionTimeoutMilli=3600000
server.compression.enabled=true
server.compression.mime-types=text/css,text/javascript,application/javascript
server.compression.min-response-size=10240
admin.check.tokenTimeoutMilli=3600000
admin.check.signSecret=86295dd0c4ef69a1036b0b0c15158d77
dubbo.application.name=dubbo-admin
dubbo.registry.address=${admin.registry.address}
spring.datasource.url=jdbc:h2:mem:~/dubbo-admin;MODE=MYSQL;
spring.datasource.username=sa
spring.datasource.password=
mybatis-plus.global-config.db-config.id-type=none
dubbo.application.logger=slf4j
' &gt; /tmp/application.properties

docker run -it --rm \
    -v /tmp/application.properties:/config/application.properties \
    -p 38080:38080 \
    docker.io/apache/dubbo-admin:0.5.0


#浏览器访问： link:http://localhost:38080[http://localhost:38080]

docker run -it --rm --name tmp_dubbo_admin --entrypoint sh docker.io/apache/dubbo-admin:0.5.0

docker run -it --rm  --entrypoint sh docker.io/apache/dubbo-admin:0.5.0

docker cp tmp_dubbo_admin:/app.jar /tmp/app.jar</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="">???</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">-Ddubbo.application.check-serializable=false
-Ddubbo.application.serialize-check-status=DISABLE
-Ddubbo.hessian.allowNonSerializable=true</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_序列化serialization">序列化：Serialization</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>org.apache.dubbo.common.serialize.Serialization</p>
</li>
<li>
<p>org.apache.dubbo.common.serialize.hessian2.Hessian2Serialization deserialize</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>watch org.apache.dubbo.common.serialize.hessian2.Hessian2FactoryManager getSerializerFactory '{params[0],returnObj,throwExp}' -x 3</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-plain" data-lang="plain"># dubbo 调用后，对返回值的反序列化调用
ts=2023-08-21 09:56:10;thread_name=arthas-command-execute;id=1dd;is_daemon=true;priority=5;TCCL=com.taobao.pandora.boot.loader.ReLaunchURLClassLoader@79079097
    @org.apache.dubbo.common.serialize.hessian2.Hessian2Serialization.deserialize()
        at org.apache.dubbo.common.serialize.DefaultSerializationExceptionWrapper.deserialize(DefaultSerializationExceptionWrapper.java:57)
        at org.apache.dubbo.rpc.protocol.dubbo.DecodeableRpcResult.decode(DecodeableRpcResult.java:94)
        at org.apache.dubbo.rpc.protocol.dubbo.DecodeableRpcResult.decode(DecodeableRpcResult.java:149)
        at org.apache.dubbo.remoting.transport.DecodeHandler.decode(DecodeHandler.java:62)
        at org.apache.dubbo.remoting.transport.DecodeHandler.received(DecodeHandler.java:50)
        at org.apache.dubbo.remoting.transport.dispatcher.ChannelEventRunnable.run(ChannelEventRunnable.java:62)
        at org.apache.dubbo.common.threadpool.ThreadlessExecutor$RunnableWrapper.run(ThreadlessExecutor.java:152)
        at org.apache.dubbo.common.threadpool.ThreadlessExecutor.waitAndDrain(ThreadlessExecutor.java:77)
        at org.apache.dubbo.rpc.AsyncRpcResult.get(AsyncRpcResult.java:205)
        at org.apache.dubbo.rpc.protocol.AbstractInvoker.waitForResultIfSync(AbstractInvoker.java:287)
        at org.apache.dubbo.rpc.protocol.AbstractInvoker.invoke(AbstractInvoker.java:190)
        at org.apache.dubbo.rpc.listener.ListenerInvokerWrapper.invoke(ListenerInvokerWrapper.java:71)
        at org.apache.dubbo.metrics.filter.MetricsFilter.invoke(MetricsFilter.java:63)
        at org.apache.dubbo.rpc.cluster.filter.FilterChainBuilder$CopyOfFilterChainNode.invoke(FilterChainBuilder.java:334)
        at org.apache.dubbo.rpc.cluster.filter.FilterChainBuilder$CallbackRegistrationInvoker.invoke(FilterChainBuilder.java:196)
        at org.apache.dubbo.rpc.protocol.ReferenceCountInvokerWrapper.invoke(ReferenceCountInvokerWrapper.java:78)
        at org.apache.dubbo.rpc.cluster.support.AbstractClusterInvoker.invokeWithContext(AbstractClusterInvoker.java:383)
        at org.apache.dubbo.rpc.cluster.support.FailoverClusterInvoker.doInvoke(FailoverClusterInvoker.java:80)
        at org.apache.dubbo.rpc.cluster.support.AbstractClusterInvoker.invoke(AbstractClusterInvoker.java:344)
        at org.apache.dubbo.rpc.cluster.router.RouterSnapshotFilter.invoke(RouterSnapshotFilter.java:46)
        at org.apache.dubbo.rpc.cluster.filter.FilterChainBuilder$CopyOfFilterChainNode.invoke(FilterChainBuilder.java:334)
        at org.apache.dubbo.monitor.support.MonitorFilter.invoke(MonitorFilter.java:108)
        at org.apache.dubbo.rpc.cluster.filter.FilterChainBuilder$CopyOfFilterChainNode.invoke(FilterChainBuilder.java:334)
        at org.apache.dubbo.rpc.cluster.filter.support.MetricsClusterFilter.invoke(MetricsClusterFilter.java:50)
        at org.apache.dubbo.rpc.cluster.filter.FilterChainBuilder$CopyOfFilterChainNode.invoke(FilterChainBuilder.java:334)
        at org.apache.dubbo.rpc.protocol.dubbo.filter.FutureFilter.invoke(FutureFilter.java:52)
        at org.apache.dubbo.rpc.cluster.filter.FilterChainBuilder$CopyOfFilterChainNode.invoke(FilterChainBuilder.java:334)
        at org.apache.dubbo.spring.security.filter.ContextHolderParametersSelectedTransferFilter.invoke(ContextHolderParametersSelectedTransferFilter.java:41)
        at org.apache.dubbo.rpc.cluster.filter.FilterChainBuilder$CopyOfFilterChainNode.invoke(FilterChainBuilder.java:334)
        at org.apache.dubbo.rpc.cluster.filter.support.ConsumerClassLoaderFilter.invoke(ConsumerClassLoaderFilter.java:40)
        at org.apache.dubbo.rpc.cluster.filter.FilterChainBuilder$CopyOfFilterChainNode.invoke(FilterChainBuilder.java:334)
        at org.apache.dubbo.rpc.cluster.filter.support.ConsumerContextFilter.invoke(ConsumerContextFilter.java:118)
        at org.apache.dubbo.rpc.cluster.filter.FilterChainBuilder$CopyOfFilterChainNode.invoke(FilterChainBuilder.java:334)
        at org.apache.dubbo.rpc.cluster.filter.FilterChainBuilder$CallbackRegistrationInvoker.invoke(FilterChainBuilder.java:196)
        at org.apache.dubbo.rpc.cluster.support.wrapper.AbstractCluster$ClusterFilterInvoker.invoke(AbstractCluster.java:91)
        at org.apache.dubbo.rpc.cluster.support.wrapper.MockClusterInvoker.invoke(MockClusterInvoker.java:103)
        at org.apache.dubbo.rpc.cluster.support.wrapper.ScopeClusterInvoker.invoke(ScopeClusterInvoker.java:169)
        at org.apache.dubbo.registry.client.migration.MigrationInvoker.invoke(MigrationInvoker.java:284)
        at org.apache.dubbo.rpc.proxy.InvocationUtil.invoke(InvocationUtil.java:57)
        at org.apache.dubbo.rpc.proxy.InvokerInvocationHandler.invoke(InvokerInvocationHandler.java:75)
        at com.alibaba.security.openapi.service.MetaServiceDubboProxy2.getRiskTagList(MetaServiceDubboProxy2.java:-1)
        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(NativeMethodAccessorImpl.java:-2)
        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
        at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:566)
        at ognl.OgnlRuntime.invokeMethod(OgnlRuntime.java:899)
        at ognl.OgnlRuntime.callAppropriateMethod(OgnlRuntime.java:1544)
        at ognl.ObjectMethodAccessor.callMethod(ObjectMethodAccessor.java:68)
        at ognl.OgnlRuntime.callMethod(OgnlRuntime.java:1620)
        at ognl.ASTMethod.getValueBody(ASTMethod.java:91)
        at ognl.SimpleNode.evaluateGetValueBody(SimpleNode.java:212)
        at ognl.SimpleNode.getValue(SimpleNode.java:258)
        at ognl.ASTChain.getValueBody(ASTChain.java:141)
        at ognl.SimpleNode.evaluateGetValueBody(SimpleNode.java:212)
        at ognl.SimpleNode.getValue(SimpleNode.java:258)
        at ognl.ASTSequence.getValueBody(ASTSequence.java:63)
        at ognl.SimpleNode.evaluateGetValueBody(SimpleNode.java:212)
        at ognl.SimpleNode.getValue(SimpleNode.java:258)
        at ognl.Ognl.getValue(Ognl.java:470)
        at ognl.Ognl.getValue(Ognl.java:572)
        at ognl.Ognl.getValue(Ognl.java:542)
        at com.taobao.arthas.core.command.express.OgnlExpress.get(OgnlExpress.java:40)
        at com.taobao.arthas.core.command.klass100.OgnlCommand.process(OgnlCommand.java:105)
        at com.taobao.arthas.core.shell.command.impl.AnnotatedCommandImpl.process(AnnotatedCommandImpl.java:82)
        at com.taobao.arthas.core.shell.command.impl.AnnotatedCommandImpl.access$100(AnnotatedCommandImpl.java:18)
        at com.taobao.arthas.core.shell.command.impl.AnnotatedCommandImpl$ProcessHandler.handle(AnnotatedCommandImpl.java:111)
        at com.taobao.arthas.core.shell.command.impl.AnnotatedCommandImpl$ProcessHandler.handle(AnnotatedCommandImpl.java:108)
        at com.taobao.arthas.core.shell.system.impl.ProcessImpl$CommandProcessTask.run(ProcessImpl.java:385)
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
        at java.util.concurrent.FutureTask.run(FutureTask.java:264)
        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
        at java.lang.Thread.run(Thread.java:829)</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_org_apache_dubbo_rpc_invoker">org.apache.dubbo.rpc.Invoker</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_org_apache_dubbo_rpc_protocol_injvm_injvminvoker">org.apache.dubbo.rpc.protocol.injvm.InjvmInvoker</h3>

</div>
</div>
</div>
<div class="sect1">
<h2 id="_org_apache_dubbo_rpc_cluster_clusterinvoker">org.apache.dubbo.rpc.cluster.ClusterInvoker</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_spi">SPI</h2>
<div class="sectionbody">
<div class="paragraph">
<p>FIXME: 如何禁用某个特定的SPI实现？</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-plain" data-lang="plain">- org.apache.dubbo.common.extension.ExtensionLoader#strategies
    - org.apache.dubbo.common.extension.DubboInternalLoadingStrategy : "META-INF/dubbo/internal/" , overridden = false
    - org.apache.dubbo.common.extension.DubboLoadingStrategy : "META-INF/dubbo/" , overridden = true
    - org.apache.dubbo.common.extension.ServicesLoadingStrategy : "META-INF/services/"  : 优先级最低， overridden = true</code></pre>
</div>
</div>
<div class="paragraph">
<p>SPI列表</p>
</div>
<div class="paragraph">
<p>PS: 可以在 idea intellij : Edit : Find : Search Structurally&#8230;&#8203; :
基于 'class, interface &amp; enums' ，再增加 '@SPI' 注解，scope="Project and Libraries" 进行搜索即可。</p>
</div>
<div class="paragraph">
<p>搜素完的结果，可以全部选中，在按 相应的 'Copy | Paste Special : Copy Reference'  快捷键(MacOS上的是 <span class="keyseq"><kbd>Alt</kbd>+<kbd>Shift</kbd>+<kbd>Cmd</kbd>+<kbd>C</kbd></span> ）复制出所有类名。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-plain" data-lang="plain">com.alibaba.dubbo.common.extension.ExtensionFactory  # @Deprecated
com.alibaba.dubbo.container.page.PageHandler
org.apache.dubbo.auth.spi.AccessKeyStorage
org.apache.dubbo.auth.spi.Authenticator
org.apache.dubbo.cache.CacheFactory
org.apache.dubbo.common.compiler.Compiler
org.apache.dubbo.common.config.configcenter.DynamicConfigurationFactory
org.apache.dubbo.common.config.OrderedPropertiesProvider
org.apache.dubbo.common.context.ApplicationExt
org.apache.dubbo.common.context.ModuleExt
org.apache.dubbo.common.convert.multiple.MultiValueConverter
org.apache.dubbo.common.convert.Converter
org.apache.dubbo.common.deploy.ApplicationDeployListener
org.apache.dubbo.common.deploy.ModuleDeployListener
org.apache.dubbo.common.extension.ExtensionFactory   # @@Deprecated
org.apache.dubbo.common.extension.ExtensionInjector
org.apache.dubbo.common.infra.InfraAdapter
org.apache.dubbo.common.json.JsonUtil
org.apache.dubbo.common.lang.ShutdownHookCallback
org.apache.dubbo.common.logger.LoggerAdapter
org.apache.dubbo.common.serialize.MultipleSerialization
org.apache.dubbo.common.serialize.Serialization
org.apache.dubbo.common.ssl.CertProvider
org.apache.dubbo.common.status.reporter.FrameworkStatusReporter
org.apache.dubbo.common.status.StatusChecker
org.apache.dubbo.common.store.DataStore
org.apache.dubbo.common.threadpool.event.ThreadPoolExhaustedListener
org.apache.dubbo.common.threadpool.manager.ExecutorRepository
org.apache.dubbo.common.threadpool.ThreadPool
org.apache.dubbo.common.url.component.param.DynamicParamSource
org.apache.dubbo.common.utils.ParameterNameReader
org.apache.dubbo.config.bootstrap.DubboBootstrapStartStopListener
org.apache.dubbo.config.spring.context.DubboSpringInitCustomizer
org.apache.dubbo.config.ConfigInitializer
org.apache.dubbo.config.ConfigPostProcessor  # ⭕️
org.apache.dubbo.config.ServiceListener
org.apache.dubbo.metadata.definition.builder.TypeBuilder
org.apache.dubbo.metadata.report.MetadataReportFactory
org.apache.dubbo.metadata.MetadataParamsFilter
org.apache.dubbo.metadata.ServiceNameMapping
org.apache.dubbo.metrics.collector.MetricsCollector
org.apache.dubbo.metrics.report.MetricsReporterFactory
org.apache.dubbo.metrics.service.MetricsService
org.apache.dubbo.metrics.service.MetricsServiceExporter
org.apache.dubbo.monitor.MonitorFactory
org.apache.dubbo.qos.api.BaseCommand
org.apache.dubbo.qos.permission.PermissionChecker
org.apache.dubbo.qos.probe.LivenessProbe
org.apache.dubbo.qos.probe.ReadinessProbe
org.apache.dubbo.qos.probe.StartupProbe
org.apache.dubbo.registry.client.metadata.MetadataServiceURLBuilder
org.apache.dubbo.registry.client.metadata.ServiceInstanceNotificationCustomizer
org.apache.dubbo.registry.client.migration.MigrationAddressComparator
org.apache.dubbo.registry.client.migration.PreMigratingConditionChecker
org.apache.dubbo.registry.client.RegistryClusterIdentifier
org.apache.dubbo.registry.client.ServiceDiscoveryFactory
org.apache.dubbo.registry.client.ServiceInstanceCustomizer
org.apache.dubbo.registry.integration.RegistryProtocolListener
org.apache.dubbo.registry.integration.ServiceURLCustomizer
org.apache.dubbo.registry.AddressListener
org.apache.dubbo.registry.ProviderFirstParams
org.apache.dubbo.registry.RegistryFactory
org.apache.dubbo.registry.RegistryServiceListener
org.apache.dubbo.remoting.api.connection.ConnectionManager
org.apache.dubbo.remoting.api.pu.PortUnificationTransporter
org.apache.dubbo.remoting.api.WireProtocol
org.apache.dubbo.remoting.exchange.Exchanger
org.apache.dubbo.remoting.http12.h1.Http1ServerTransportListenerFactory
org.apache.dubbo.remoting.http12.h2.Http2ServerTransportListenerFactory
org.apache.dubbo.remoting.http12.message.HttpMessageAdapterFactory
org.apache.dubbo.remoting.http12.message.HttpMessageDecoderFactory
org.apache.dubbo.remoting.http12.message.HttpMessageEncoderFactory
org.apache.dubbo.remoting.http12.ExceptionHandler
org.apache.dubbo.remoting.http3.Http3ServerTransportListenerFactory
org.apache.dubbo.remoting.telnet.TelnetHandler
org.apache.dubbo.remoting.transport.netty4.ChannelAddressAccessor
org.apache.dubbo.remoting.websocket.WebSocketServerTransportListenerFactory
org.apache.dubbo.remoting.ChannelHandler
org.apache.dubbo.remoting.Codec
org.apache.dubbo.remoting.Codec2
org.apache.dubbo.remoting.Dispatcher
org.apache.dubbo.remoting.Transporter
org.apache.dubbo.rpc.cluster.filter.ClusterFilter
org.apache.dubbo.rpc.cluster.filter.FilterChainBuilder
org.apache.dubbo.rpc.cluster.filter.InvocationInterceptorBuilder
org.apache.dubbo.rpc.cluster.governance.GovernanceRuleRepository
org.apache.dubbo.rpc.cluster.interceptor.ClusterInterceptor
org.apache.dubbo.rpc.cluster.router.condition.matcher.pattern.ValuePattern
org.apache.dubbo.rpc.cluster.router.condition.matcher.ConditionMatcherFactory
org.apache.dubbo.rpc.cluster.router.mesh.route.MeshEnvListenerFactory
org.apache.dubbo.rpc.cluster.router.mesh.util.TracingContextProvider
org.apache.dubbo.rpc.cluster.router.state.StateRouterFactory
org.apache.dubbo.rpc.cluster.Cluster
org.apache.dubbo.rpc.cluster.ConfiguratorFactory
org.apache.dubbo.rpc.cluster.LoadBalance
org.apache.dubbo.rpc.cluster.Merger
org.apache.dubbo.rpc.cluster.ProviderURLMergeProcessor
org.apache.dubbo.rpc.cluster.RouterFactory
org.apache.dubbo.rpc.cluster.RuleConverter
org.apache.dubbo.rpc.executor.IsolationExecutorSupportFactory
org.apache.dubbo.rpc.model.ApplicationInitListener
org.apache.dubbo.rpc.model.BuiltinServiceDetector
org.apache.dubbo.rpc.model.PackableMethodFactory
org.apache.dubbo.rpc.model.ScopeModelInitializer
org.apache.dubbo.rpc.protocol.dubbo.ByteAccessor
org.apache.dubbo.rpc.protocol.injvm.ParamDeepCopyUtil
org.apache.dubbo.rpc.protocol.tri.compressor.Compressor
org.apache.dubbo.rpc.protocol.tri.compressor.DeCompressor
org.apache.dubbo.rpc.protocol.tri.rest.argument.ArgumentConverter
org.apache.dubbo.rpc.protocol.tri.rest.argument.ArgumentResolver
org.apache.dubbo.rpc.protocol.tri.rest.filter.RestExtension
org.apache.dubbo.rpc.protocol.tri.rest.filter.RestExtensionAdapter
org.apache.dubbo.rpc.protocol.tri.rest.mapping.RequestMappingResolver
org.apache.dubbo.rpc.protocol.tri.rest.openapi.OpenAPIExtension
org.apache.dubbo.rpc.protocol.tri.route.RequestHandlerMapping
org.apache.dubbo.rpc.protocol.tri.stream.ClientStreamFactory
org.apache.dubbo.rpc.ExporterListener
org.apache.dubbo.rpc.Filter
org.apache.dubbo.rpc.HeaderFilter
org.apache.dubbo.rpc.InvokerListener
org.apache.dubbo.rpc.PathResolver
org.apache.dubbo.rpc.PenetrateAttachmentSelector
org.apache.dubbo.rpc.Protocol
org.apache.dubbo.rpc.ProxyFactory
org.apache.dubbo.rpc.ZoneDetector
org.apache.dubbo.spring.security.jackson.ObjectMapperCodecCustomer
org.apache.dubbo.validation.Validation</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_org_apache_dubbo_rpc_cluster_filter_clusterfilter">org.apache.dubbo.rpc.cluster.filter.ClusterFilter</h3>
<div class="listingblock">
<div class="content">
<pre>hsf://30.196.226.97/com.alibaba.dangqian.HiService?REGISTRY_CLUSTER=GLOBAL&amp;application=unknow_project_name&amp;background=false&amp;check=false&amp;dubbo=2.0.2&amp;dubbo.metadata.storage-type=remote&amp;group=HSF&amp;include_filter=-cluster-filter&amp;include_router=-cluster-router&amp;init=true&amp;interface=com.alibaba.dangqian.HiService&amp;interfaces=com.alibaba.dangqian.HiService,com.taobao.hsf.remoting.service.GenericService,com.taobao.hsf.remoting.service.EchoService,org.apache.dubbo.rpc.service.GenericService,com.alibaba.dubbo.rpc.service.GenericService&amp;loadbalance=hsfrandom&amp;logger=dubbo-to-hsf&amp;mapping-type=metadata&amp;maxWaitAddressTime=3000&amp;metadata-type=remote&amp;methods=sayHello,sayHi&amp;mg=unknown&amp;migration.delay=10&amp;migration.force=false&amp;migration.step=FORCE_INTERFACE&amp;migration.threshold=0.0&amp;pid=5411&amp;protocol=hsf&amp;proxy=jdk&amp;reference.filter=-genericimpl,-cluster-filter&amp;register-mode=interface&amp;register.ip=30.196.226.97&amp;registry-cluster-type=msha&amp;release=&amp;retries=0&amp;revision=1.0.2-SNAPSHOT&amp;router=-app,-condition,-standard-mesh-rule,-service,-tag,-cluster-router&amp;scope=remote&amp;side=consumer&amp;sticky=false&amp;timeout=300000&amp;timestamp=1705542554802&amp;url-merge-processor=hsf&amp;ut=CENTER&amp;version=1.0.0</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-plain" data-lang="plain">org.apache.dubbo.common.URL
  org.apache.dubbo.common.url.component.ServiceConfigURL
  org.apache.dubbo.common.url.component.ServiceAddressURL
    org.apache.dubbo.common.url.component.DubboServiceAddressURL
  org.apache.dubbo.registry.client.InstanceAddressURL
  org.apache.dubbo.registry.client.OverrideInstanceAddressURL


# ServiceConfigURL
hsf-registry-protocol://127.0.0.1:3181/org.apache.dubbo.registry.RegistryService?application=unknow_project_name&amp;dubbo=2.0.2&amp;dubbo.metadata.storage-type=remote&amp;logger=dubbo-to-hsf&amp;mapping-type=metadata&amp;metadata-type=remote&amp;pid=30983&amp;preferred=true&amp;register-mode=interface&amp;registry=cs&amp;registry-cluster-type=msha&amp;registry-protocol-type=hsf-registry-protocol&amp;timestamp=1705650182730</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_log">log</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://cn.dubbo.apache.org/en/docs3-v2/java-sdk/advanced-features-and-usage/others/logger-management/" class="bare">https://cn.dubbo.apache.org/en/docs3-v2/java-sdk/advanced-features-and-usage/others/logger-management/</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">telnet 127.0.0.1 22222
help
ls
loggerInfo</code></pre>
</div>
</div>
</div>
</div>
<h1 id="_extensionloader" class="sect0">ExtensionLoader</h1>
<div class="paragraph">
<p>org.apache.dubbo.common.extension.ExtensionLoader</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">sc -d org.apache.dubbo.rpc.model.FrameworkModel

ognl -c 4470fbd6 '
#extensionClazz=@org.apache.dubbo.spring.security.jackson.ObjectMapperCodecCustomer@class,
#frameworkModel=@org.apache.dubbo.rpc.model.FrameworkModel@defaultInstance,
#extensionLoader=#frameworkModel.extensionDirector.extensionLoadersMap[#extensionClazz],
#extensionLoader.cachedInstances
' -x 3

# 获取 jackson ObjectMapper
ognl -c 4470fbd6 '
#frameworkModel=@org.apache.dubbo.rpc.model.FrameworkModel@defaultInstance,
#appModel=#frameworkModel.defaultAppModel,
#objectMapperCodec=#appModel.getBeanFactory().getBean(@org.apache.dubbo.spring.security.jackson.ObjectMapperCodec@class),
#objectMapper=#objectMapperCodec.mapper
#objectMapper
' -x 3

#  获取 jackson ObjectMapper 注册的 mixin
ognl -c 4470fbd6 '
#frameworkModel=@org.apache.dubbo.rpc.model.FrameworkModel@defaultInstance,
#appModel=#frameworkModel.defaultAppModel,
#objectMapperCodec=#appModel.getBeanFactory().getBean(@org.apache.dubbo.spring.security.jackson.ObjectMapperCodec@class),
#objectMapperCodec._mixIns._localMixIns
' -x 3




# 检查有多少个 FrameworkModel 实例
ognl -c 4470fbd6 '@org.apache.dubbo.rpc.model.FrameworkModel@allInstances'
# 检查有多少个 ApplicationModel 实例
ognl -c 4470fbd6 '@org.apache.dubbo.rpc.model.FrameworkModel@allInstances.{  applicationModels}'




ognl -c 4470fbd6 '
#extensionClazz=@org.apache.dubbo.spring.security.jackson.ObjectMapperCodecCustomer@class,
#frameworkModel=@org.apache.dubbo.rpc.model.FrameworkModel@defaultInstance,
#extensionLoader=#frameworkModel.extensionDirector.extensionLoadersMap[#extensionClazz],
#extensionLoader.scopeModel
' -x 3

ognl -c 4470fbd6 '
@org.apache.dubbo.common.extension.ExtensionLoader@strategies
' -x 3

ognl -c 4470fbd6 '
#fileName="META-INF/dubbo/org.apache.dubbo.spring.security.jackson.ObjectMapperCodecCustomer",
#classLoader=@com.alibaba.security.gong9.mw.pandora.hsf.impl.dubbo.jackson.G9ObjectMapperCodecCustomer@class.getClassLoader(),
#classLoadersToLoad={#classLoader},
#map=@org.apache.dubbo.common.utils.ClassLoaderResourceLoader@loadResources(#fileName,#classLoadersToLoad),
#extensionClazz=@org.apache.dubbo.spring.security.jackson.ObjectMapperCodecCustomer@class,
#frameworkModel=@org.apache.dubbo.rpc.model.FrameworkModel@defaultInstance,
#extensionLoader=#frameworkModel.extensionDirector.extensionLoadersMap[#extensionClazz],
#extensionClasses=#{},
#loadingStrategy=@org.apache.dubbo.common.extension.ExtensionLoader@strategies[1],
#extensionLoader.loadFromClass(
  #extensionClasses,
  #loadingStrategy.overridden(),
  #map.values().toArray()[0],
  #classLoader,
  #loadingStrategy.includedPackages(),
  #loadingStrategy.excludedPackages(),
  #loadingStrategy.onlyExtensionClassLoaderPackages()
),
#extensionClasses
' -x 3

# 读取给定的文件的内容
ognl -c 4470fbd6 '
#fileName="META-INF/dubbo/org.apache.dubbo.spring.security.jackson.ObjectMapperCodecCustomer",
#classLoader=@com.alibaba.security.gong9.mw.pandora.hsf.impl.dubbo.jackson.G9ObjectMapperCodecCustomer@class.getClassLoader(),
#classLoadersToLoad={#classLoader},
#map=@org.apache.dubbo.common.utils.ClassLoaderResourceLoader@loadResources(#fileName,#classLoadersToLoad),
#extensionClazz=@org.apache.dubbo.spring.security.jackson.ObjectMapperCodecCustomer@class,
#frameworkModel=@org.apache.dubbo.rpc.model.FrameworkModel@defaultInstance,
#extensionLoader=#frameworkModel.extensionDirector.extensionLoadersMap[#extensionClazz],
#extensionClasses=#{},
#loadingStrategy=@org.apache.dubbo.common.extension.ExtensionLoader@strategies[1],
#extensionLoader.getResourceContent(#map.values().toArray()[0].toArray()[0])
' -x 3

# 读取给定的文件的内容
ognl -c 4470fbd6 '
#fileName="META-INF/dubbo/org.apache.dubbo.spring.security.jackson.ObjectMapperCodecCustomer",
#classLoader=@com.alibaba.security.gong9.mw.pandora.hsf.impl.dubbo.jackson.G9ObjectMapperCodecCustomer@class.getClassLoader(),
#classLoadersToLoad={#classLoader},
#map=@org.apache.dubbo.common.utils.ClassLoaderResourceLoader@loadResources(#fileName,#classLoadersToLoad),
#extensionClazz=@org.apache.dubbo.spring.security.jackson.ObjectMapperCodecCustomer@class,
#frameworkModel=@org.apache.dubbo.rpc.model.FrameworkModel@defaultInstance,
#extensionLoader=#frameworkModel.extensionDirector.extensionLoadersMap[#extensionClazz],
#extensionClasses=#{},
#loadingStrategy=@org.apache.dubbo.common.extension.ExtensionLoader@strategies[1],
#url=#map.values().toArray()[0].toArray()[0],
#extensionLoader.loadClass(#classLoader,#extensionClasses,#url),
#extensionClasses
' -x 3


ognl -c 4470fbd6 '
#className="com.alibaba.security.gong9.mw.pandora.hsf.impl.dubbo.jackson.G9ObjectMapperCodecCustomer",
#classLoader=@org.apache.dubbo.config.bootstrap.DubboBootstrap@class.getClassLoader(),
@java.lang.Class@forName(#className, true, #classLoader)
'

ognl -c 4470fbd6 '
#extensionClazz=@org.apache.dubbo.spring.security.jackson.ObjectMapperCodecCustomer@class,
#frameworkModel=@org.apache.dubbo.rpc.model.FrameworkModel@defaultInstance,
#extensionLoader=#frameworkModel.extensionDirector.extensionLoadersMap[#extensionClazz],
#extensionLoader.exceptions
' -x 3


FIXME: 为何 #extensionLoader.loadClassIfActive(#classLoader,#class) 有 两个参数，既 传递 classLoader, 又传递 class ?

ognl -c 4470fbd6 '
#clazz=@org.apache.dubbo.spring.security.model.SecurityScopeModelInitializer@class,
#classLoader=@org.apache.dubbo.config.bootstrap.DubboBootstrap@class.getClassLoader(),
#extensionClazz=@org.apache.dubbo.spring.security.jackson.ObjectMapperCodecCustomer@class,
#frameworkModel=@org.apache.dubbo.rpc.model.FrameworkModel@defaultInstance,
#extensionLoader=#frameworkModel.extensionDirector.extensionLoadersMap[#extensionClazz],
#extensionLoader.loadClassIfActive(#classLoader,#clazz)
' -x 3


# true - pandora 插件的classloader的parent==null，但仍然能找到对应的类
ognl -c 4470fbd6 '
#className="org.springframework.security.core.context.SecurityContextHolder",
#classLoader=@org.apache.dubbo.config.bootstrap.DubboBootstrap@class.getClassLoader(),
@org.apache.dubbo.common.utils.ClassUtils@isPresent(#className, #classLoader)
' -x 3

ognl -c 4470fbd6 '
#pandoraPluginClassLoader=@org.apache.dubbo.config.bootstrap.DubboBootstrap@class.getClassLoader(),
#pandoraFramworkClassLoader=#pandoraPluginClassLoader.pandoraClassLoader
' -x 3</code></pre>
</div>
</div>
<div class="sect1">
<h2 id="_org_apache_dubbo_common_extension_activate">@org.apache.dubbo.common.extension.Activate</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package org.apache.dubbo.spring.security.model;
import org.apache.dubbo.common.extension.Activate;
import org.apache.dubbo.rpc.model.ScopeModelInitializer;
@Activate(onClass = {SECURITY_CONTEXT_HOLDER_CLASS_NAME, CORE_JACKSON_2_MODULE_CLASS_NAME, OBJECT_MAPPER_CLASS_NAME})
public class SecurityScopeModelInitializer implements ScopeModelInitializer {

    //...
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_基于权重值的比例流量转发">基于权重值的比例流量转发</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://cn.dubbo.apache.org/zh-cn/overview/mannual/java-sdk/tasks/traffic-management/weight/">基于权重值的比例流量转发</a></p>
</li>
<li>
<p><a href="https://cn.dubbo.apache.org/zh-cn/overview/what/core-features/traffic/configuration-rule/">动态配置规则</a></p>
</li>
<li>
<p>org.apache.dubbo.config.AbstractServiceConfig#weight</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">configVersion: v3.0
scope: service
key: org.apache.dubbo.samples.OrderService
configs:
  - side: provider
    match:
      param:
        - key: orderVersion
          value:
            exact: v2
    parameters:
      weight: 25</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_triple_协议">triple 协议</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://cn.dubbo.apache.org/zh-cn/overview/mannual/java-sdk/tasks/protocols/rest/">发布 REST 风格的服务</a></p>
</li>
<li>
<p>org.apache.dubbo.rpc.protocol.tri.TriplePathResolver</p>
</li>
<li>
<p>org.apache.dubbo.rpc.protocol.tri.TripleProtocol#<a href="https://github.com/apache/dubbo/blob/3.3/dubbo-rpc/dubbo-rpc-triple/src/main/java/org/apache/dubbo/rpc/protocol/tri/TripleProtocol.java#L98">getDefaultPort</a></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">cat &gt; /tmp/data.json &lt;&lt;EOF
[
  "taobao_k8s_daily_test01",
  {
    "userId": "black01"
  }
]
EOF

cat &gt; /tmp/data.json &lt;&lt;EOF
[
  "qooland_public_templete",
  {
    "content": "black01"
  }
]
EOF

curl -XPOST "http://localhost:50051/com.alibaba.security.tenant.common.service.RequestService/request" \
   -H "Content-Type: application/json" \
   -d @/tmp/data.json

curl  --header "Content-Type: application/json" \
--data '["qooland_public_templete",{ "content": "あんまり覚えてないもん(៸៸&lt;1cd0&gt;&gt;𖥦&lt;៸៸&lt;1cd0&gt; )੭ﾞ  "}]'    \
 http://121.199.172.170/com.alibaba.security.tenant.common.service.RequestService/request  \
 -H "Authorization: Bearer eyJraWQiOiJiNDYxMzJiOS0xYzQwLTQ2YTMtODEwMC0xMWMwMWU0MWQyY2MiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiJ1cm46ZXhhbXBsZTphdWRpZW5jZSIsInVpZCI6IjEyMzQ1Njc4OTAifQ.U52Cg2paCOcNJU4W4PMYFesJfDd5JAA8tKi7NliQbUyvC0gxdMuYd6WrGJpVlZ7a0zLrMbVf__I7KTE8zu-B-doOKhWujSu9rh1G_R2fkc29wO8M1em2jyVTvibK4Tj8ln1xIo_Fp-IYC5ySCRCOFAjv6B3ObJ0h8iiJ2ftjViOyOs7DntMZ6W8oqlrvhp7McBkiFDkznu9IIjW55bPO72TFuLYU10WxLy2AicJE1l0HFnj7qM7VcF7IBTvxLaBy2lr4MfqdrZAiVbqhV0cd4vnWoJw7Bat2fArq_ZHrm21RrXwgafRdJqqE052YD0Wz-2xzfuMSZTBa7VPaDUJ57g"

curl  \
    --header "Content-Type: application/json" \
    --data '{"content": "black01"}'    \
    'http://121.199.172.170/requestService/invoke?eventCode=qooland_public_templete'  \
    -H "Authorization: Bearer eyJraWQiOiJiNDYxMzJiOS0xYzQwLTQ2YTMtODEwMC0xMWMwMWU0MWQyY2MiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiJ1cm46ZXhhbXBsZTphdWRpZW5jZSIsInVpZCI6IjEyMzQ1Njc4OTAifQ.U52Cg2paCOcNJU4W4PMYFesJfDd5JAA8tKi7NliQbUyvC0gxdMuYd6WrGJpVlZ7a0zLrMbVf__I7KTE8zu-B-doOKhWujSu9rh1G_R2fkc29wO8M1em2jyVTvibK4Tj8ln1xIo_Fp-IYC5ySCRCOFAjv6B3ObJ0h8iiJ2ftjViOyOs7DntMZ6W8oqlrvhp7McBkiFDkznu9IIjW55bPO72TFuLYU10WxLy2AicJE1l0HFnj7qM7VcF7IBTvxLaBy2lr4MfqdrZAiVbqhV0cd4vnWoJw7Bat2fArq_ZHrm21RrXwgafRdJqqE052YD0Wz-2xzfuMSZTBa7VPaDUJ57g"</code></pre>
</div>
</div>
<div class="paragraph">
<p>相关类:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>org.apache.dubbo.rpc.protocol.tri.rest.mapping.Registration#mapping</p>
</li>
<li>
<p>org.apache.dubbo.rpc.protocol.tri.rest.mapping.RequestMapping#consumesCondition</p>
</li>
<li>
<p>org.apache.dubbo.rpc.protocol.tri.rest.mapping.condition.ConsumesCondition#match</p>
</li>
<li>
<p>org.apache.dubbo.rpc.protocol.tri.rest.mapping.condition.ServiceGroupVersionCondition</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"># 检查注册的路径
vmtool -x 3 --action getInstances --className org.apache.dubbo.rpc.protocol.tri.rest.mapping.DefaultRequestMappingRegistry  \
--express 'instances[0].tree.directPathMap.keySet().{ #this.toString() }'

vmtool -x 3 -c 78a7fc27 --action getInstances --className org.apache.dubbo.rpc.protocol.tri.rest.mapping.DefaultRequestMappingRegistry  --express '
#path="/com.alibaba.security.tenant.common.service.RequestService/request",
#keyString=new org.apache.dubbo.rpc.protocol.tri.rest.util.KeyString(#path),
instances[0].tree.directPathMap.get(#keyString)[0].value.mapping.customCondition
'

# dubbo.rpc.tri.resolve-fallback-to-default=false
ognl -c 78a7fc27 '@org.apache.dubbo.rpc.protocol.tri.TripleProtocol@RESOLVE_FALLBACK_TO_DEFAULT'
ognl -c 78a7fc27 '@org.apache.dubbo.rpc.protocol.tri.TripleProtocol@class.getField("RESOLVE_FALLBACK_TO_DEFAULT").setBoolean(null,false)'

#

ognl -c 78a7fc27 '
#appModel=@org.apache.dubbo.rpc.model.ApplicationModel@defaultModel(),
#conf=@org.apache.dubbo.common.config.ConfigurationUtils@getEnvConfiguration(#appModel),
#conf.getClass().getName()
'</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-plain" data-lang="plain">ts=2025-04-11 17:01:01.925;thread_name=DubboServerHandler-169.254.245.134:50051-thread-51;id=13763;is_daemon=true;priority=5;TCCL=com.alibaba.security.mtee.bundle.framework.core.loader.JiugongBundleClassLoader@33e3d49d;trace_id=a9fef58617443620618986475dd92f;rpc_id=9
    @com.taobao.mbus.biz.message.impl.RequestServiceImpl.request()
        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(NativeMethodAccessorImpl.java:-2)
        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
        at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:566)
        at com.taobao.mbus.biz.message.impl.hsf.HsfMessageSourceListener.invoke(HsfMessageSourceListener.java:78)
        at com.sun.proxy.$Proxy159.request(null:-1)
        at com.alibaba.security.tenant.common.service.RequestServiceDubboWrap3.invokeMethod(RequestServiceDubboWrap3.java:-1)
        at org.apache.dubbo.rpc.proxy.javassist.JavassistProxyFactory$1.doInvoke(JavassistProxyFactory.java:89)
        at org.apache.dubbo.rpc.proxy.AbstractProxyInvoker.invoke(AbstractProxyInvoker.java:100)
        at org.apache.dubbo.config.invoker.DelegateProviderMetaDataInvoker.invoke(DelegateProviderMetaDataInvoker.java:55)
        at org.apache.dubbo.rpc.protocol.InvokerWrapper.invoke(InvokerWrapper.java:56)
        at org.apache.dubbo.rpc.filter.ClassLoaderCallbackFilter.invoke(ClassLoaderCallbackFilter.java:38)
        at org.apache.dubbo.rpc.cluster.filter.FilterChainBuilder$CopyOfFilterChainNode.invoke(FilterChainBuilder.java:349)
        at org.apache.dubbo.rpc.protocol.tri.rest.filter.RestExtensionExecutionFilter.lambda$invoke$0(RestExtensionExecutionFilter.java:79)
        at org.apache.dubbo.rpc.protocol.tri.rest.filter.DefaultFilterChain.doFilter(DefaultFilterChain.java:62)
        at org.apache.dubbo.rpc.protocol.tri.rest.filter.RestFilter.doFilter(RestFilter.java:28)
        at org.apache.dubbo.rpc.protocol.tri.rest.filter.DefaultFilterChain.doFilter(DefaultFilterChain.java:58)
        at org.apache.dubbo.rpc.protocol.tri.rest.filter.DefaultFilterChain.execute(DefaultFilterChain.java:51)
        at org.apache.dubbo.rpc.protocol.tri.rest.filter.RestExtensionExecutionFilter.invoke(RestExtensionExecutionFilter.java:82)
        at org.apache.dubbo.rpc.protocol.tri.rest.filter.RestFilterAdapter.invoke(RestFilterAdapter.java:36)
        at org.apache.dubbo.rpc.cluster.filter.FilterChainBuilder$CopyOfFilterChainNode.invoke(FilterChainBuilder.java:349)
        at org.apache.dubbo.rpc.protocol.tri.h12.HttpContextCallbackFilter.invoke(HttpContextCallbackFilter.java:37)
        at org.apache.dubbo.rpc.cluster.filter.FilterChainBuilder$CopyOfFilterChainNode.invoke(FilterChainBuilder.java:349)
        at org.apache.dubbo.rpc.protocol.dubbo.filter.TraceFilter.invoke(TraceFilter.java:80)
        at org.apache.dubbo.rpc.cluster.filter.FilterChainBuilder$CopyOfFilterChainNode.invoke(FilterChainBuilder.java:349)
        at org.apache.dubbo.rpc.filter.TimeoutFilter.invoke(TimeoutFilter.java:45)
        at org.apache.dubbo.rpc.cluster.filter.FilterChainBuilder$CopyOfFilterChainNode.invoke(FilterChainBuilder.java:349)
        at org.apache.dubbo.monitor.support.MonitorFilter.invoke(MonitorFilter.java:109)
        at org.apache.dubbo.rpc.cluster.filter.FilterChainBuilder$CopyOfFilterChainNode.invoke(FilterChainBuilder.java:349)
        at org.apache.dubbo.rpc.filter.ExceptionFilter.invoke(ExceptionFilter.java:55)
        at org.apache.dubbo.rpc.cluster.filter.FilterChainBuilder$CopyOfFilterChainNode.invoke(FilterChainBuilder.java:349)
        at org.apache.dubbo.rpc.filter.AccessLogFilter.invoke(AccessLogFilter.java:120)
        at org.apache.dubbo.rpc.cluster.filter.FilterChainBuilder$CopyOfFilterChainNode.invoke(FilterChainBuilder.java:349)
        at org.apache.dubbo.rpc.filter.GenericFilter.invoke(GenericFilter.java:222)
        at org.apache.dubbo.rpc.cluster.filter.FilterChainBuilder$CopyOfFilterChainNode.invoke(FilterChainBuilder.java:349)
        at org.apache.dubbo.rpc.protocol.tri.h12.HttpContextFilter.invoke(HttpContextFilter.java:50)
        at org.apache.dubbo.rpc.cluster.filter.FilterChainBuilder$CopyOfFilterChainNode.invoke(FilterChainBuilder.java:349)
        at org.apache.dubbo.rpc.filter.ClassLoaderFilter.invoke(ClassLoaderFilter.java:54)
        at org.apache.dubbo.rpc.cluster.filter.FilterChainBuilder$CopyOfFilterChainNode.invoke(FilterChainBuilder.java:349)
        at org.apache.dubbo.rpc.filter.EchoFilter.invoke(EchoFilter.java:41)
        at org.apache.dubbo.rpc.cluster.filter.FilterChainBuilder$CopyOfFilterChainNode.invoke(FilterChainBuilder.java:349)
        at org.apache.dubbo.metrics.filter.MetricsFilter.invoke(MetricsFilter.java:86)
        at org.apache.dubbo.metrics.filter.MetricsProviderFilter.invoke(MetricsProviderFilter.java:37)
        at org.apache.dubbo.rpc.cluster.filter.FilterChainBuilder$CopyOfFilterChainNode.invoke(FilterChainBuilder.java:349)
        at org.apache.dubbo.rpc.filter.ProfilerServerFilter.invoke(ProfilerServerFilter.java:66)
        at org.apache.dubbo.rpc.cluster.filter.FilterChainBuilder$CopyOfFilterChainNode.invoke(FilterChainBuilder.java:349)
        at org.apache.dubbo.rpc.filter.ContextFilter.invoke(ContextFilter.java:191)
        at org.apache.dubbo.rpc.cluster.filter.FilterChainBuilder$CopyOfFilterChainNode.invoke(FilterChainBuilder.java:349)
        at org.apache.dubbo.rpc.cluster.filter.FilterChainBuilder$CallbackRegistrationInvoker.invoke(FilterChainBuilder.java:197)
        at org.apache.dubbo.rpc.protocol.tri.h12.AbstractServerCallListener.invoke(AbstractServerCallListener.java:76)
        at org.apache.dubbo.rpc.protocol.tri.h12.UnaryServerCallListener.onComplete(UnaryServerCallListener.java:50)
        at org.apache.dubbo.rpc.protocol.tri.h12.http1.DefaultHttp11ServerTransportListener$AutoCompleteUnaryServerCallListener.onMessage(DefaultHttp11ServerTransportListener.java:120)
        at org.apache.dubbo.remoting.http12.message.DefaultListeningDecoder.decode(DefaultListeningDecoder.java:42)
        at org.apache.dubbo.rpc.protocol.tri.h12.DefaultHttpMessageListener.onMessage(DefaultHttpMessageListener.java:39)
        at org.apache.dubbo.rpc.protocol.tri.h12.AbstractServerTransportListener.doOnData(AbstractServerTransportListener.java:183)
        at org.apache.dubbo.rpc.protocol.tri.h12.AbstractServerTransportListener.lambda$onData$1(AbstractServerTransportListener.java:168)
        at org.apache.dubbo.common.threadpool.serial.SerializingExecutor.run(SerializingExecutor.java:105)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
        at org.apache.dubbo.common.threadlocal.InternalRunnable.run(InternalRunnable.java:39)
        at java.lang.Thread.run(Thread.java:991)</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_异步调用">异步调用</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>com.alibaba.dubbo.rpc.support.RpcUtils#isAsync</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>stack org.apache.dubbo.rpc.protocol.dubbo.DubboProtocol refer</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_dubbo_metrics">dubbo-metrics</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>org.apache.dubbo.metrics.service.MetricsService</p>
</li>
<li>
<p>org.apache.dubbo.metrics.filter.MetricsFilter</p>
</li>
<li>
<p>org.apache.dubbo.metrics.event.MetricsEvent</p>
</li>
<li>
<p>org.apache.dubbo.metrics.event.MetricsEventMulticaster#addListener</p>
</li>
<li>
<p><a href="https://cn.dubbo.apache.org/en/overview/mannual/java-sdk/reference-manual/merics/meter/">metrics</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_thread_pool">thread-pool</h2>
<div class="sectionbody">
<div class="paragraph">
<p>org.apache.dubbo.common.threadpool.ThreadPool</p>
</div>
<div class="paragraph">
<p><a href="https://cn.dubbo.apache.org/zh-cn/overview/mannual/java-sdk/tasks/framework/threading-model/">消费端线程模型，提供者端线程模型</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_配置">配置</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">-Ddubbo.protocol.threads=500
&lt;!-- 能进700，并发500 ??? --&gt;
&lt;dubbo:protocol name="dubbo" port="20880"
                threads="500"
                queues="200"
                accepts="700"/&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="https://cn.dubbo.apache.org/zh-cn/overview/mannual/java-sdk/reference-manual/config/properties/">配置项参考手册</a></p>
</div>
<div class="ulist">
<ul>
<li>
<p>org.apache.dubbo.common.constants.CommonConstants#THREADS_KEY</p>
</li>
<li>
<p>org.apache.dubbo.common.constants.CommonConstants#DEFAULT_THREADS</p>
</li>
<li>
<p>org.apache.dubbo.common.config.Configuration</p>
</li>
<li>
<p>org.apache.dubbo.common.config.SystemConfiguration</p>
</li>
<li>
<p>org.apache.dubbo.config.ProtocolConfig</p>
</li>
<li>
<p>com.alibaba.dubbo.config.ProviderConfig # 获取 ProtocolConfig</p>
</li>
<li>
<p>org.apache.dubbo.rpc.protocol.tri.websocket.TripleEndpoint#onOpen</p>
</li>
<li>
<p>org.apache.dubbo.config.nested.TripleConfig</p>
</li>
<li>
<p>org.apache.dubbo.common.threadpool.manager.DefaultExecutorRepository#updateThreadpool</p>
</li>
<li>
<p>org.apache.dubbo.remoting.Dispatcher&#8201;&#8212;&#8201;org.apache.dubbo.remoting.transport.dispatcher.all.AllDispatcher&#8201;&#8212;&#8201;org.apache.dubbo.remoting.transport.dispatcher.direct.DirectDispatcher&#8201;&#8212;&#8201;org.apache.dubbo.remoting.transport.dispatcher.execution.ExecutionDispatcher&#8201;&#8212;&#8201;org.apache.dubbo.remoting.transport.dispatcher.message.MessageOnlyDispatcher&#8201;&#8212;&#8201;org.apache.dubbo.remoting.transport.dispatcher.connection.ConnectionOrderedDispatcher</p>
</li>
<li>
<p>org.apache.dubbo.remoting.transport.dispatcher.WrappedChannelHandler#getSharedExecutorService()</p>
</li>
<li>
<p>org.apache.dubbo.common.threadpool.manager.ExecutorRepository</p>
</li>
<li>
<p>org.apache.dubbo.common.threadpool.manager.IsolationExecutorRepository</p>
</li>
<li>
<p>org.apache.dubbo.common.threadpool.ThreadPool # SPI</p>
</li>
<li>
<p>org.apache.dubbo.common.threadpool.support.fixed.FixedThreadPool # 默认实现</p>
</li>
<li>
<p>org.apache.dubbo.common.threadpool.support.cached.CachedThreadPool</p>
</li>
<li>
<p>org.apache.dubbo.common.threadpool.support.eager.EagerThreadPool</p>
</li>
<li>
<p>org.apache.dubbo.common.threadpool.support.limited.LimitedThreadPool</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>-Ddubble.protocol.threads=400</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">dubbo:
  protocol:          # org.apache.dubbo.config.ProtocolConfig
    name: dubbo
    port: -1
    dispatcher: all     # 服务端的线程模型
                        # "all" （默认）, "direct", "execution", "message", "connection"
    threadpool: fixed   # 线程池类型
                        # "fixed"   : 固定大小的线程池类型，默认
                        # "cached"  : 缓存线程池，根据需要创建新线程。
                        # "limited" : 有限线程池，线程数有限，任务队列无限。
                        # "eager"   : 优先创建新线程的线程池。
    threads: 200        # 线程池大小
    corethreads: 100    #
    iothreads: 8        # IO线程数
    queues: 500         # 任务队列长度
    alive:100           # 毫秒, =&gt; ThreadPoolExecutor#keepAliveTime (这里是纳秒/ns)</code></pre>
</div>
</div>
<div class="paragraph">
<p>初始化 dobbo provider 时的 URL</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-plain" data-lang="plain"># org.apache.dubbo.common.threadpool.manager.IsolationExecutorRepository#createExecutor

dubbo://30.170.132.110:20880/com.alibaba.dangqian.HiService?anyhost=true&amp;application=unknown&amp;background=false&amp;bind.ip=30.170.132.110&amp;bind.port=20880&amp;channel.readonly.sent=true&amp;codec=dubbo&amp;deprecated=false&amp;dubbo=2.0.2&amp;dynamic=true&amp;enable-empty-protection=true&amp;executor-management-mode=isolation&amp;file-cache=true&amp;generic=false&amp;group=HSF&amp;heartbeat=60000&amp;interface=com.alibaba.dangqian.HiService&amp;methods=sayHello,sayHi&amp;pid=42420&amp;prefer.serialization=hessian2,fastjson2&amp;release=3.3.3&amp;revision=1.0.2-SNAPSHOT&amp;service-name-mapping=true&amp;side=provider&amp;threadname=DubboServerHandler-30.170.132.110:20880&amp;timeout=100&amp;timestamp=1747315536723&amp;version=1.0.0

tri://192.168.10.125:50051/com.alibaba.dangqian.HiService?anyhost=true&amp;application=unknown&amp;background=false&amp;bind.ip=192.168.10.125&amp;bind.port=50051&amp;deprecated=false&amp;dubbo=2.0.2&amp;dynamic=true&amp;enable-empty-protection=true&amp;executor-management-mode=isolation&amp;file-cache=true&amp;generic=false&amp;group=HSF&amp;interface=com.alibaba.dangqian.HiService&amp;methods=sayHello,sayHi&amp;pid=6783&amp;prefer.serialization=hessian2,fastjson2&amp;release=3.3.3&amp;revision=1.0.2-SNAPSHOT&amp;service-name-mapping=true&amp;side=provider&amp;threadname=DubboServerHandler-192.168.10.125:50051&amp;threads=333&amp;timeout=100&amp;timestamp=1747329373016&amp;version=1.0.0</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-plain" data-lang="plain"># 启动时，初始化好 DoubboConfig
DubboBootstrap.getInstance().start()
  org.apache.dubbo.config.deploy.DefaultApplicationDeployer#initialize
    org.apache.dubbo.config.deploy.DefaultApplicationDeployer#loadApplicationConfigs
      org.apache.dubbo.config.context.ConfigManager#loadConfigs
        #refreshAll
          org.apache.dubbo.config.AbstractConfig#refresh
            #refreshWithPrefixes   # preferredPrefix="dubbo.protocols.dubbo"
                                   # 多种配置合并
              org.apache.dubbo.common.config.Environment#getConfigurationMaps()  # jvm属性,环境变量,appExternal,external,appConfig,DoubboConfig
                org.apache.dubbo.config.context.ConfigConfigurationAdapter#&lt;init&gt;
                  #getMetaData
                    #appendAttributes
              #assignProperties  # 将多种配置合并后，重新赋值到当前的 DoubboConfig 对象上
# 声明dubbo provider时
org.apache.dubbo.config.ServiceConfig#export()
  #doExport()
    #doExportUrls
      #doExportUrlsFor1Protocol
        #buildAttributes  # 为 service provider url 准备相关参数map
          org.apache.dubbo.config.AbstractConfig#appendParameters(Map, ProtocolConfig)  # 将ProtocolConfig的值暴露到map里
        #buildUrl  # 构建 service provider url
          org.apache.dubbo.common.threadpool.manager.DefaultExecutorRepository#createExecutorIfAbsent
            #createExecutor
              org.apache.dubbo.common.threadpool.support.fixed.FixedThreadPool#getExecutor
        #exportUrl
          org.apache.dubbo.rpc.protocol.tri.TripleProtocol#export
            org.apache.dubbo.common.threadpool.manager.DefaultExecutorRepository#createExecutorIfAbsent
              org.apache.dubbo.common.threadpool.support.fixed.FixedThreadPool#getExecutor</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">org.apache.dubbo.common.threadpool.manager.DefaultExecutorRepository#data

#extensionLoader=#applicationModel.getExtensionDirector().getExtensionLoader(@org.apache.dubbo.common.threadpool.manager.ExecutorRepository@class),
#executorRepository=#extensionLoader.getExtension("isolation")

# key1 : "java.util.concurrent.ExecutorService"
#  key11: "50051", "20880","unknown/org.apache.dubbo.metadata.MetadataServiceV2:2.0.0","unknown/org.apache.dubbo.metadata.MetadataService:1.0.0",
#  value11 : ThreadPoolExecutor


# HSF 使用的这个类
org.apache.dubbo.common.threadpool.manager.DefaultExecutorRepository#data

org.apache.dubbo.common.threadpool.manager.IsolationExecutorRepository

vmtool -x 3 --action getInstances --className org.apache.dubbo.common.threadpool.manager.DefaultExecutorRepository --express 'instances.{#this.getClass().getName()}'


# 实际的类型也是 IsolationExecutorRepository
vmtool -x 3 --action getInstances --className org.apache.dubbo.common.threadpool.manager.DefaultExecutorRepository --express 'instances.{#this.getClass().getName()}'

# 应该是 triple 协议+dubbo协议各自开了两个 fixed 的线程池
vmtool -x 3 --action getInstances --className org.apache.dubbo.common.threadpool.manager.IsolationExecutorRepository --express 'instances.length'
vmtool -x 3 --action getInstances --className org.apache.dubbo.common.threadpool.manager.IsolationExecutorRepository --express 'instances.{#this.getClass().getName()}'

vmtool -x 3 --action getInstances --className org.apache.dubbo.common.threadpool.manager.IsolationExecutorRepository --express 'instances.{?#this.data.size()&gt;0}.{#this.data.keySet()}'

# 检查实际运行的信息
vmtool -x 3 --action getInstances --className org.apache.dubbo.common.threadpool.manager.DefaultExecutorRepository  --express '
instances
.{?#this.data.size()&gt;0}
.{
  #this.data["java.util.concurrent.ExecutorService"].entrySet()
   .{? #this.getKey() == "50051" || #this.getKey() == "20880" }
   .{
      #{
        "port"              : #this.getKey(),
        "corePoolSize"      : #this.getValue().corePoolSize,
        "maximumPoolSize"   : #this.getValue().maximumPoolSize,
        "keepAliveTime"     : #this.getValue().keepAliveTime
      }
    }
}[0]
'

vmtool -x 3 --action getInstances --className org.apache.dubbo.common.threadpool.manager.DefaultExecutorRepository  --express '
instances
.{?#this.data.size()&gt;0}
.{#this.data.keySet()}
'

# JVM 属性
-Ddubbo.protocol.threads=500    # 对所有协议生效，比如: dubbo,tri
-Ddubbo.protocols.dubbo.threads=500  # 对单个协议生效
-Ddubbo.protocols.tri.threads=600    # 对单个协议生效</code></pre>
</div>
</div>
<div class="paragraph">
<p>podman run --rm -it \
 --platform=linux/amd64 \
 -p 8848:8848 -p 9848:9848 -p 9849:9849 -p 7848:7848 \
 -e MODE=standalone \
 -e NACOS_AUTH_IDENTITY_KEY=nacos \
 -e NACOS_AUTH_IDENTITY_VALUE=nacos \
 -e NACOS_AUTH_TOKEN=SecretKey012345678901234567890123456789012345678901234567890123456789 \
 o-docker.alibaba-inc.com/docker.io/nacos-server:v2.5.1</p>
</div>
<div class="paragraph">
<p>-ea -Ddubbo.registry.address=nacos://nacos:nacos@127.0.0.1:8848
-ea -Ddubbo.registry.address=nacos://nacos:nacos@127.0.0.1:8848 -Ddubbo.protocol.threads=333
-Ddubbo.registry.address=nacos://127.0.0.1:8848 -Dgong9.mw.dubbo.jackson.type.whitelist=com.alibaba.fastjson</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">fix 1. table1 title</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">prop</th>
<th class="tableblock halign-left valign-top">fix</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">threads</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y,200,ThreadPoolExecutor#corePoolSize,ThreadPoolExecutor#maximumPoolSize</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">queues</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y,0, 小于0:MemorySafeLinkedBlockingQueue,等于0:SynchronousQueue,大于0:LinkedBlockingQueue</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">cache 2. table1 title</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">prop</th>
<th class="tableblock halign-left valign-top">cache</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">threads</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y,Integer.MAX_VALUE,ThreadPoolExecutor#corePoolSize,ThreadPoolExecutor#maximumPoolSize</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">queues</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y,0, 小于0:MemorySafeLinkedBlockingQueue,等于0:SynchronousQueue,大于0:LinkedBlockingQueue</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">corethreads</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y,0, 小于0:MemorySafeLinkedBlockingQueue,等于0:SynchronousQueue,大于0:LinkedBlockingQueue</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">alive</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y,60000</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Eager 3. table1 title</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">prop</th>
<th class="tableblock halign-left valign-top">Eager</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">threads</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y,Integer.MAX_VALUE,ThreadPoolExecutor#corePoolSize,ThreadPoolExecutor#maximumPoolSize</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">queues</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y,0, 小于0:MemorySafeLinkedBlockingQueue,等于0:SynchronousQueue,大于0:LinkedBlockingQueue</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">corethreads</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y,0, 小于0:MemorySafeLinkedBlockingQueue,等于0:SynchronousQueue,大于0:LinkedBlockingQueue</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">alive</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y,60000</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">limited 4. table1 title</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">prop</th>
<th class="tableblock halign-left valign-top">limited</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">threads</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y,200,ThreadPoolExecutor#corePoolSize,ThreadPoolExecutor#maximumPoolSize</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">queues</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y,0, 小于0:MemorySafeLinkedBlockingQueue,等于0:SynchronousQueue,大于0:LinkedBlockingQueue</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">corethreads</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y,0, 小于0:MemorySafeLinkedBlockingQueue,等于0:SynchronousQueue,大于0:LinkedBlockingQueue</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_获取发布的服务列表">获取发布的服务列表</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell"># @see org.apache.dubbo.qos.command.impl.Ls
sc -d org.apache.dubbo.config.bootstrap.DubboBootstrap
ognl -c 4a83a74a '
#dubboBootstrap=@org.apache.dubbo.config.bootstrap.DubboBootstrap@getInstance(),
#applicationModel=#dubboBootstrap.getApplicationModel(),
#frameworkModel=#applicationModel.getFrameworkModel(),
#providerModels=#frameworkModel.getServiceRepository().allProviderModels(),
#providerModels.{ #{"serviceKey": #this.serviceKey, "serviceUrls": #this.serviceUrls} }
' -x 3</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_获取使用的注册中心列表">获取使用的注册中心列表</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell"># 获取有多少个注册中心
sc -d org.apache.dubbo.config.bootstrap.DubboBootstrap
ognl -c 4a83a74a '
#dubboBootstrap=@org.apache.dubbo.config.bootstrap.DubboBootstrap@getInstance(),
#configManager=#dubboBootstrap.getConfigManager(),
#configManager.configsCache
' -x 3</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_q_多classloader_的情况下dubbo_从哪个classloader_查找扩展点">Q: 多classloader 的情况下，dubbo 从哪个classloader 查找扩展点？</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-plain" data-lang="plain"># 加载扩展点 class
org.apache.dubbo.common.extension.ExtensionLoader#loadExtensionClasses
  #loadDirectory
    #loadDirectoryInternal

    // 1. 如果 loadingStrategy.preferExtensionClassLoader()==true (自带实现均是false)
    //    且 ExtensionLoader.class.getClassLoader() != ClassLoader.getSystemClassLoader() 时,
    //    则优先使用 ExtensionLoader.class 所在的 classloader.
    // 2.1 如果要加载的 dubbo 内部 "special_spi.properties" 记录的类型，则【仅】使用 ExtensionLoader.class 所在的 classloader.
    // 2.2 否则，继续使用 scopeModel.getClassLoaders(),
    //     但如果 scopeModel.getClassLoaders() 是空值，则 从 ClassLoader.getSystemResources(fileName) 查找 文件并加载类。


org.apache.dubbo.rpc.model.ScopeModel#classLoaders
  // FrameworkModel,ApplicationModel,ModuleModel
  // 1. 优先使用 ScopeModel.class.getClassLoader() , 即dubbo 框架所在的 classloader




# 创建/加载扩展点 对象
org.apache.dubbo.rpc.cluster.filter.DefaultFilterChainBuilder#buildInvokerChain  中去加载 Filter 扩展点。
org.apache.dubbo.rpc.model.ScopeModelUtil#getExtensionLoader :</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_q_同jvm调用时dubbo转换为_injvm_调用的位置是">Q: 同JVM调用时，dubbo转换为 injvm 调用的位置是？</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_hsf_rpcfilter">HSF: RPCFilter</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>com.taobao.hsf.invocation.filter.RPCFilter</p>
</li>
<li>
<p>com.taobao.hsf.filter.HSFFilterChainBuilder</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2025-10-17 03:56:17 UTC
</div>
</div>
</body>
</html>